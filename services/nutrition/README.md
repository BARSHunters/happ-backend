# Nutrition

Сервис для генерации рационов питания.

## Зависимости

- Требует чтобы схемы в базе данных назывались `nutrition`
- [Gradle зависимости](build.gradle.kts)

## Конфигурация

При запуске программы проверяется переменная среды `PROFILE`.
Если она не задана или пустая, будет использован
файл [application.properties](src/main/resources/application.properties)

* Это production способ конфигурации
* `.properties` умеют искать все чувствительные или часто изменяющиеся данные в переменных окружения
* Переменные окружения можно также задать в `.env` файле. В таком случае если переменная не найдена в окружении она
  будет искаться в этом файле.

Если в переменной среды `PROFILE` задано имя профиля, то оно будет подставлено так: `application-<profile>.properties`.
На основании этого можно создавать профили, например, для тестирования или разработки.

Конфигурация логирования лежит в [logback.xml](src/main/resources/logback.xml). Для логирования используется logback.

## Миграции

Реализован функционал для применения sql скриптов, лежащих в ресурсах приложения.

Реализация в методе [initService](src/main/kotlin/Database.kt).

Ожидается, что при инициализации объекта сервиса будет вызван этот метод с указанием файла sql скрипта,
который создаёт нужные для работы сервиса сущности.

Инструкции в скрипте исполняются по одной. Одна инструкция ограничивается `;`.
То есть писать сложные функции, триггеры и т.д., увы, не выйдет
